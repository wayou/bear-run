(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./src/js/main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(320,480, Phaser.AUTO, '');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
}

game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');

},{"./states/boot":"D:\\Program Files\\github\\bear-run\\src\\js\\states\\boot.js","./states/game":"D:\\Program Files\\github\\bear-run\\src\\js\\states\\game.js","./states/menu":"D:\\Program Files\\github\\bear-run\\src\\js\\states\\menu.js","./states/preloader":"D:\\Program Files\\github\\bear-run\\src\\js\\states\\preloader.js","./states/splash":"D:\\Program Files\\github\\bear-run\\src\\js\\states\\splash.js","./utils":"D:\\Program Files\\github\\bear-run\\src\\js\\utils.js"}],"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\bird.js":[function(require,module,exports){
'use strict';

var Bird = function(game, x, y, frame) {
    Phaser.Sprite.call(this, game, x, y, 'bird', frame); //new Sprite(game, x, y, key, frame)

    // initialize your prefab here

    this.game.physics.arcade.enableBody(this);

    this.anchor.setTo(0.5, 0.5);

    this.animations.add('flap');
    this.animations.play('flap', 12, true);

};

Bird.prototype = Object.create(Phaser.Sprite.prototype);
Bird.prototype.constructor = Bird;

Bird.prototype.update = function() {

    // write your prefab's specific update code here
    if(this.angle<90){
        this.angle+=2.5;
    }

};

Bird.prototype.flap = function() {
    this.body.velocity.y = -400;

    this.game.add.tween(this).to({angle:-40},100).start();


}

module.exports = Bird;
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\ground.js":[function(require,module,exports){
'use strict';

var Ground = function(game, x, y, width, height) {
    Phaser.TileSprite.call(this, game, x, y, width, height, 'ground'); //new TileSprite(game, x, y, width, height, key, frame) 

    this.game.physics.arcade.enableBody(this);

    this.autoScroll(-200, 0);

    this.body.allowGravity = false;
    this.body.immovable=true;
};

module.exports = Ground;

Ground.prototype = Object.create(Phaser.TileSprite.prototype);
Ground.prototype.constructor = Ground;


Ground.prototype.update = function() {
    // write your prefab's specific update code here  
};
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\pipe.js":[function(require,module,exports){

var Pipe = function(game, x, y, frame) {  
  Phaser.Sprite.call(this, game, x, y, 'pipe', frame);
  this.anchor.setTo(0.5, 0.5);
  this.game.physics.arcade.enableBody(this);

  this.body.allowGravity = false;
  this.body.immovable = true;

};

Pipe.prototype = Object.create(Phaser.Sprite.prototype);  
Pipe.prototype.constructor = Pipe;

Pipe.prototype.update = function() {

};


module.exports = Pipe;  
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\pipeGroup.js":[function(require,module,exports){
var Pipe = require('./pipe');

var PipeGroup = function(game, parent) {
    Phaser.Group.call(this, game, parent);

    //top pipe
    this.topPipe = new Pipe(this.game, 0, 0, 0);
    this.add(this.topPipe);

    //bottom pipe
    this.bottomPipe = new Pipe(this.game, 0, 440, 1);
    this.add(this.bottomPipe);
    
    this.hasScored = false;
    
    this.setAll('body.velocity.x', -200);
};

PipeGroup.prototype = Object.create(Phaser.Group.prototype);
PipeGroup.prototype.constructor = PipeGroup;
PipeGroup.prototype.update = function() {
    this.checkWorldBounds(); 
};
PipeGroup.prototype.reset = function(x,y) {
    // Step 1    
    this.topPipe.reset(0, 0);

    // Step 2
    this.bottomPipe.reset(0, 440); // Step 2

    // Step 3
    this.x = x;
    this.y = y;

    // Step 4
    this.setAll('body.velocity.x', -200);

    // Step 5
    this.hasScored = false;

    // Step 6
    this.exists = true;
};

PipeGroup.prototype.checkWorldBounds = function() {  
  if(!this.topPipe.inWorld) {
    this.exists = false;
  }
};


module.exports = PipeGroup;



},{"./pipe":"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\pipe.js"}],"D:\\Program Files\\github\\bear-run\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function() {};

module.exports = Boot;

Boot.prototype = {

    preload: function() {
        this.load.image('preloader', 'assets/preloader.gif');
    },

    create: function() {
        this.game.input.maxPointers = 1;

        if (this.game.device.desktop) {
            this.game.scale.pageAlignHorizontally = true;
            this.game.scale.pageAlignVertically = true;
        } else {
            this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
            this.game.scale.setMinMax(240, 320, 480, 640);
            this.game.scale.forceOrientation(false, true);

        }

        this.game.state.start('Preloader');
    }
};
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\states\\game.js":[function(require,module,exports){
var Bird = require('../entities/bird');
var Ground = require('../entities/ground');
var PipeGroup = require('../entities/pipeGroup');

var Game = function() {
    this.testentity = null;
};

module.exports = Game;

Game.prototype = {
    
    create: function() {
        this.game.physics.startSystem(Phaser.Physics.ARCADE);
        this.game.physics.arcade.gravity.y = 1200;
        
        this.background = this.game.add.sprite(0, 0, 'background');
        this.background.width = this.game.width;
        this.background.height = this.game.height;
        
        this.bird = new Bird(this.game, 100, this.game.height / 2);
        this.game.add.existing(this.bird);
        
        this.pipes = this.game.add.group();

        //the ground
        this.ground = new Ground(this.game, 0, 400, 335, 112);
        this.game.add.existing(this.ground);
        
        
        this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]);
        
        var flapKey = this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
        flapKey.onDown.add(this.bird.flap, this.bird);

        //mouse click and tap
        this.input.onDown.add(this.bird.flap, this.bird);

        //add a timer
        this.pipeGenerator = this.game.time.events.loop(Phaser.Timer.SECOND * 1.25, this.generatoePipes, this);
        this.pipeGenerator.timer.start();
    
    },
    
    update: function() {
        this.game.physics.arcade.collide(this.bird, this.ground, this.deathHandler, null, this);
        // enable collisions between the bird and each group in the pipes group
        this.pipes.forEach(function(pipeGroup) {
            this.game.physics.arcade.collide(this.bird, pipeGroup, this.deathHandler, null, this);
        }, this);
    },
    generatoePipes: function() {
        var pipeY = this.game.rnd.integerInRange(-100, 100);
        var pipeGroup = this.pipes.getFirstExists(false);
        if (!pipeGroup) {
            pipeGroup = new PipeGroup(this.game, this.pipes);
        }
        pipeGroup.reset(this.game.width + pipeGroup.width / 2, pipeY);
    },
    deathHandler: function() {
//         this.game.state.start('gameover');
    },
    shutdown: function() {
        this.game.input.keyboard.removeKey(Phaser.Keyboard.SPACEBAR);
        this.bird.destroy();
        this.pipes.destroy();
    }
};

},{"../entities/bird":"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\bird.js","../entities/ground":"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\ground.js","../entities/pipeGroup":"D:\\Program Files\\github\\bear-run\\src\\js\\entities\\pipeGroup.js"}],"D:\\Program Files\\github\\bear-run\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function() {
    this.text = null;
};

module.exports = Menu;

Menu.prototype = {
    preload: function() {

    },

    create: function() {
        //make background full screen
        //method 1
        // this.background = this.game.add.tileSprite(0, 0, this.game.width, this.game.height, 'background');
        //method 2
        this.background = this.game.add.sprite(0, 0, 'background');
        this.background.width = this.game.width;
        this.background.height = this.game.height;

        this.ground = this.game.add.tileSprite(0, 400, 335, 112, 'ground'); //tileSprite(x, y, width, height, key, frame, group) 
        this.ground.autoScroll(-200, 0);

        this.titleGroup = this.game.add.group();

        this.title = this.game.add.sprite(0, 0, 'title');
        this.titleGroup.add(this.title);

        this.bird = this.game.add.sprite(200, 5, 'bird');
        this.titleGroup.add(this.bird);

        this.bird.animations.add('flap');
        this.bird.animations.play('flap', 12, true);

        this.titleGroup.x = 30;
        this.titleGroup.y = 100;

        this.game.add.tween(this.titleGroup).to({
            y: 115
        }, 350, Phaser.Easing.Linear.NONE, true, 0, -1, true); //to(properties, duration, ease, autoStart, delay, repeat, yoyo)

        this.startBtn = this.game.add.button(this.game.width / 2, 300, 'startButton', this.startClick, this);
        this.startBtn.anchor.setTo(0.5,0.5);

    },

    update: function() {

    },
    startClick:function(){
      this.game.state.start('Game');
    }

};
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function(game) {
    this.asset = null;
    this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

    preload: function() {
        this.indicator = this.add.sprite(320, this.game.height / 2, 'preloader'); //sprite(x, y, key, frame, group) 
        this.indicator.anchor.setTo(0.5, 0.5);

        this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
        this.load.setPreloadSprite(this.indicator);

        //load stuff
        this.load.image('background', 'assets/background.png');
        this.load.image('ground', 'assets/ground.png');
        this.load.image('title', 'assets/title.png');
        this.load.image('startButton', 'assets/start-button.png');

        //the palyer
        this.load.spritesheet('player', 'assets/player.png');//this.load.spritesheet(key, url, frameWidth, frameHeight, numberOfFrames);  
        //the bird
        this.load.spritesheet('bird', 'assets/bird.png',34,24,3);

        this.load.spritesheet('pipe','assets/pipes.png',54,320,2);
    },

    create: function() {
        // this.indicator.cropEnabled = false;
    },

    update: function() {
        if ( !! this.ready) {
            this.game.state.start('Game');
        }
    },

    onLoadComplete: function() {
        this.ready = true;
    }
};


},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"D:\\Program Files\\github\\bear-run\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    }
};

module.exports = Utils;
},{}]},{},["./src/js/main.js"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwic3JjXFxqc1xcbWFpbi5qcyIsInNyY1xcanNcXGVudGl0aWVzXFxiaXJkLmpzIiwic3JjXFxqc1xcZW50aXRpZXNcXGdyb3VuZC5qcyIsInNyY1xcanNcXGVudGl0aWVzXFxwaXBlLmpzIiwic3JjXFxqc1xcZW50aXRpZXNcXHBpcGVHcm91cC5qcyIsInNyY1xcanNcXHN0YXRlc1xcYm9vdC5qcyIsInNyY1xcanNcXHN0YXRlc1xcZ2FtZS5qcyIsInNyY1xcanNcXHN0YXRlc1xcbWVudS5qcyIsInNyY1xcanNcXHN0YXRlc1xccHJlbG9hZGVyLmpzIiwic3JjXFxqc1xcc3RhdGVzXFxzcGxhc2guanMiLCJzcmNcXGpzXFx1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSgzMjAsNDgwLCBQaGFzZXIuQVVUTywgJycpO1xuXG53aW5kb3cuVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG53aW5kb3cucGxheWVyU3RhdGUgPSB7XG4gICAgY3VycmVudExldmVsOiAnR2FtZSdcbn1cblxuZ2FtZS5zdGF0ZS5hZGQoJ0Jvb3QnLCByZXF1aXJlKCcuL3N0YXRlcy9ib290JykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ1NwbGFzaCcsIHJlcXVpcmUoJy4vc3RhdGVzL3NwbGFzaCcpKTtcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XG5nYW1lLnN0YXRlLmFkZCgnTWVudScsIHJlcXVpcmUoJy4vc3RhdGVzL21lbnUnKSk7XG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XG5cbmdhbWUuc3RhdGUuc3RhcnQoJ0Jvb3QnKTtcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBCaXJkID0gZnVuY3Rpb24oZ2FtZSwgeCwgeSwgZnJhbWUpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYmlyZCcsIGZyYW1lKTsgLy9uZXcgU3ByaXRlKGdhbWUsIHgsIHksIGtleSwgZnJhbWUpXHJcblxyXG4gICAgLy8gaW5pdGlhbGl6ZSB5b3VyIHByZWZhYiBoZXJlXHJcblxyXG4gICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZUJvZHkodGhpcyk7XHJcblxyXG4gICAgdGhpcy5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cclxuICAgIHRoaXMuYW5pbWF0aW9ucy5hZGQoJ2ZsYXAnKTtcclxuICAgIHRoaXMuYW5pbWF0aW9ucy5wbGF5KCdmbGFwJywgMTIsIHRydWUpO1xyXG5cclxufTtcclxuXHJcbkJpcmQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkJpcmQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmlyZDtcclxuXHJcbkJpcmQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8vIHdyaXRlIHlvdXIgcHJlZmFiJ3Mgc3BlY2lmaWMgdXBkYXRlIGNvZGUgaGVyZVxyXG4gICAgaWYodGhpcy5hbmdsZTw5MCl7XHJcbiAgICAgICAgdGhpcy5hbmdsZSs9Mi41O1xyXG4gICAgfVxyXG5cclxufTtcclxuXHJcbkJpcmQucHJvdG90eXBlLmZsYXAgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuYm9keS52ZWxvY2l0eS55ID0gLTQwMDtcclxuXHJcbiAgICB0aGlzLmdhbWUuYWRkLnR3ZWVuKHRoaXMpLnRvKHthbmdsZTotNDB9LDEwMCkuc3RhcnQoKTtcclxuXHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJpcmQ7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIEdyb3VuZCA9IGZ1bmN0aW9uKGdhbWUsIHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIFBoYXNlci5UaWxlU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgJ2dyb3VuZCcpOyAvL25ldyBUaWxlU3ByaXRlKGdhbWUsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGtleSwgZnJhbWUpIFxyXG5cclxuICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGVCb2R5KHRoaXMpO1xyXG5cclxuICAgIHRoaXMuYXV0b1Njcm9sbCgtMjAwLCAwKTtcclxuXHJcbiAgICB0aGlzLmJvZHkuYWxsb3dHcmF2aXR5ID0gZmFsc2U7XHJcbiAgICB0aGlzLmJvZHkuaW1tb3ZhYmxlPXRydWU7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VuZDtcclxuXHJcbkdyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5UaWxlU3ByaXRlLnByb3RvdHlwZSk7XHJcbkdyb3VuZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91bmQ7XHJcblxyXG5cclxuR3JvdW5kLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIHdyaXRlIHlvdXIgcHJlZmFiJ3Mgc3BlY2lmaWMgdXBkYXRlIGNvZGUgaGVyZSAgXHJcbn07IiwiXG52YXIgUGlwZSA9IGZ1bmN0aW9uKGdhbWUsIHgsIHksIGZyYW1lKSB7ICBcbiAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdwaXBlJywgZnJhbWUpO1xuICB0aGlzLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5lbmFibGVCb2R5KHRoaXMpO1xuXG4gIHRoaXMuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgdGhpcy5ib2R5LmltbW92YWJsZSA9IHRydWU7XG5cbn07XG5cblBpcGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7ICBcblBpcGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGlwZTtcblxuUGlwZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBQaXBlOyAgIiwidmFyIFBpcGUgPSByZXF1aXJlKCcuL3BpcGUnKTtcblxudmFyIFBpcGVHcm91cCA9IGZ1bmN0aW9uKGdhbWUsIHBhcmVudCkge1xuICAgIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUsIHBhcmVudCk7XG5cbiAgICAvL3RvcCBwaXBlXG4gICAgdGhpcy50b3BQaXBlID0gbmV3IFBpcGUodGhpcy5nYW1lLCAwLCAwLCAwKTtcbiAgICB0aGlzLmFkZCh0aGlzLnRvcFBpcGUpO1xuXG4gICAgLy9ib3R0b20gcGlwZVxuICAgIHRoaXMuYm90dG9tUGlwZSA9IG5ldyBQaXBlKHRoaXMuZ2FtZSwgMCwgNDQwLCAxKTtcbiAgICB0aGlzLmFkZCh0aGlzLmJvdHRvbVBpcGUpO1xuICAgIFxuICAgIHRoaXMuaGFzU2NvcmVkID0gZmFsc2U7XG4gICAgXG4gICAgdGhpcy5zZXRBbGwoJ2JvZHkudmVsb2NpdHkueCcsIC0yMDApO1xufTtcblxuUGlwZUdyb3VwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLkdyb3VwLnByb3RvdHlwZSk7XG5QaXBlR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGlwZUdyb3VwO1xuUGlwZUdyb3VwLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNoZWNrV29ybGRCb3VuZHMoKTsgXG59O1xuUGlwZUdyb3VwLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKHgseSkge1xuICAgIC8vIFN0ZXAgMSAgICBcbiAgICB0aGlzLnRvcFBpcGUucmVzZXQoMCwgMCk7XG5cbiAgICAvLyBTdGVwIDJcbiAgICB0aGlzLmJvdHRvbVBpcGUucmVzZXQoMCwgNDQwKTsgLy8gU3RlcCAyXG5cbiAgICAvLyBTdGVwIDNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBTdGVwIDRcbiAgICB0aGlzLnNldEFsbCgnYm9keS52ZWxvY2l0eS54JywgLTIwMCk7XG5cbiAgICAvLyBTdGVwIDVcbiAgICB0aGlzLmhhc1Njb3JlZCA9IGZhbHNlO1xuXG4gICAgLy8gU3RlcCA2XG4gICAgdGhpcy5leGlzdHMgPSB0cnVlO1xufTtcblxuUGlwZUdyb3VwLnByb3RvdHlwZS5jaGVja1dvcmxkQm91bmRzID0gZnVuY3Rpb24oKSB7ICBcbiAgaWYoIXRoaXMudG9wUGlwZS5pbldvcmxkKSB7XG4gICAgdGhpcy5leGlzdHMgPSBmYWxzZTtcbiAgfVxufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFBpcGVHcm91cDtcblxuXG4iLCJ2YXIgQm9vdCA9IGZ1bmN0aW9uKCkge307XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7XHJcblxyXG5Cb290LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgICBwcmVsb2FkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3ByZWxvYWRlcicsICdhc3NldHMvcHJlbG9hZGVyLmdpZicpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnNjYWxlLnNldE1pbk1heCgyNDAsIDMyMCwgNDgwLCA2NDApO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VPcmllbnRhdGlvbihmYWxzZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcclxuICAgIH1cclxufTsiLCJ2YXIgQmlyZCA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2JpcmQnKTtcbnZhciBHcm91bmQgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ncm91bmQnKTtcbnZhciBQaXBlR3JvdXAgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9waXBlR3JvdXAnKTtcblxudmFyIEdhbWUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRlc3RlbnRpdHkgPSBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYW1lO1xuXG5HYW1lLnByb3RvdHlwZSA9IHtcbiAgICBcbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuZ3Jhdml0eS55ID0gMTIwMDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICdiYWNrZ3JvdW5kJyk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC53aWR0aCA9IHRoaXMuZ2FtZS53aWR0aDtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLmhlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQ7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmJpcmQgPSBuZXcgQmlyZCh0aGlzLmdhbWUsIDEwMCwgdGhpcy5nYW1lLmhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRoaXMuYmlyZCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBpcGVzID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuXG4gICAgICAgIC8vdGhlIGdyb3VuZFxuICAgICAgICB0aGlzLmdyb3VuZCA9IG5ldyBHcm91bmQodGhpcy5nYW1lLCAwLCA0MDAsIDMzNSwgMTEyKTtcbiAgICAgICAgdGhpcy5nYW1lLmFkZC5leGlzdGluZyh0aGlzLmdyb3VuZCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleUNhcHR1cmUoW1BoYXNlci5LZXlib2FyZC5TUEFDRUJBUl0pO1xuICAgICAgICBcbiAgICAgICAgdmFyIGZsYXBLZXkgPSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuU1BBQ0VCQVIpO1xuICAgICAgICBmbGFwS2V5Lm9uRG93bi5hZGQodGhpcy5iaXJkLmZsYXAsIHRoaXMuYmlyZCk7XG5cbiAgICAgICAgLy9tb3VzZSBjbGljayBhbmQgdGFwXG4gICAgICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLmJpcmQuZmxhcCwgdGhpcy5iaXJkKTtcblxuICAgICAgICAvL2FkZCBhIHRpbWVyXG4gICAgICAgIHRoaXMucGlwZUdlbmVyYXRvciA9IHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5sb29wKFBoYXNlci5UaW1lci5TRUNPTkQgKiAxLjI1LCB0aGlzLmdlbmVyYXRvZVBpcGVzLCB0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlR2VuZXJhdG9yLnRpbWVyLnN0YXJ0KCk7XG4gICAgXG4gICAgfSxcbiAgICBcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLmJpcmQsIHRoaXMuZ3JvdW5kLCB0aGlzLmRlYXRoSGFuZGxlciwgbnVsbCwgdGhpcyk7XG4gICAgICAgIC8vIGVuYWJsZSBjb2xsaXNpb25zIGJldHdlZW4gdGhlIGJpcmQgYW5kIGVhY2ggZ3JvdXAgaW4gdGhlIHBpcGVzIGdyb3VwXG4gICAgICAgIHRoaXMucGlwZXMuZm9yRWFjaChmdW5jdGlvbihwaXBlR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuYmlyZCwgcGlwZUdyb3VwLCB0aGlzLmRlYXRoSGFuZGxlciwgbnVsbCwgdGhpcyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgZ2VuZXJhdG9lUGlwZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGlwZVkgPSB0aGlzLmdhbWUucm5kLmludGVnZXJJblJhbmdlKC0xMDAsIDEwMCk7XG4gICAgICAgIHZhciBwaXBlR3JvdXAgPSB0aGlzLnBpcGVzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcbiAgICAgICAgaWYgKCFwaXBlR3JvdXApIHtcbiAgICAgICAgICAgIHBpcGVHcm91cCA9IG5ldyBQaXBlR3JvdXAodGhpcy5nYW1lLCB0aGlzLnBpcGVzKTtcbiAgICAgICAgfVxuICAgICAgICBwaXBlR3JvdXAucmVzZXQodGhpcy5nYW1lLndpZHRoICsgcGlwZUdyb3VwLndpZHRoIC8gMiwgcGlwZVkpO1xuICAgIH0sXG4gICAgZGVhdGhIYW5kbGVyOiBmdW5jdGlvbigpIHtcbi8vICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdnYW1lb3ZlcicpO1xuICAgIH0sXG4gICAgc2h1dGRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQucmVtb3ZlS2V5KFBoYXNlci5LZXlib2FyZC5TUEFDRUJBUik7XG4gICAgICAgIHRoaXMuYmlyZC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucGlwZXMuZGVzdHJveSgpO1xuICAgIH1cbn07XG4iLCJ2YXIgTWVudSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy50ZXh0ID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudTtcclxuXHJcbk1lbnUucHJvdG90eXBlID0ge1xyXG4gICAgcHJlbG9hZDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vbWFrZSBiYWNrZ3JvdW5kIGZ1bGwgc2NyZWVuXHJcbiAgICAgICAgLy9tZXRob2QgMVxyXG4gICAgICAgIC8vIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCB0aGlzLmdhbWUud2lkdGgsIHRoaXMuZ2FtZS5oZWlnaHQsICdiYWNrZ3JvdW5kJyk7XHJcbiAgICAgICAgLy9tZXRob2QgMlxyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICdiYWNrZ3JvdW5kJyk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLndpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5oZWlnaHQgPSB0aGlzLmdhbWUuaGVpZ2h0O1xyXG5cclxuICAgICAgICB0aGlzLmdyb3VuZCA9IHRoaXMuZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCA0MDAsIDMzNSwgMTEyLCAnZ3JvdW5kJyk7IC8vdGlsZVNwcml0ZSh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBrZXksIGZyYW1lLCBncm91cCkgXHJcbiAgICAgICAgdGhpcy5ncm91bmQuYXV0b1Njcm9sbCgtMjAwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy50aXRsZUdyb3VwID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG5cclxuICAgICAgICB0aGlzLnRpdGxlID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwgMCwgJ3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy50aXRsZUdyb3VwLmFkZCh0aGlzLnRpdGxlKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaXJkID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUoMjAwLCA1LCAnYmlyZCcpO1xyXG4gICAgICAgIHRoaXMudGl0bGVHcm91cC5hZGQodGhpcy5iaXJkKTtcclxuXHJcbiAgICAgICAgdGhpcy5iaXJkLmFuaW1hdGlvbnMuYWRkKCdmbGFwJyk7XHJcbiAgICAgICAgdGhpcy5iaXJkLmFuaW1hdGlvbnMucGxheSgnZmxhcCcsIDEyLCB0cnVlKTtcclxuXHJcbiAgICAgICAgdGhpcy50aXRsZUdyb3VwLnggPSAzMDtcclxuICAgICAgICB0aGlzLnRpdGxlR3JvdXAueSA9IDEwMDtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lLmFkZC50d2Vlbih0aGlzLnRpdGxlR3JvdXApLnRvKHtcclxuICAgICAgICAgICAgeTogMTE1XHJcbiAgICAgICAgfSwgMzUwLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5OT05FLCB0cnVlLCAwLCAtMSwgdHJ1ZSk7IC8vdG8ocHJvcGVydGllcywgZHVyYXRpb24sIGVhc2UsIGF1dG9TdGFydCwgZGVsYXksIHJlcGVhdCwgeW95bylcclxuXHJcbiAgICAgICAgdGhpcy5zdGFydEJ0biA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuZ2FtZS53aWR0aCAvIDIsIDMwMCwgJ3N0YXJ0QnV0dG9uJywgdGhpcy5zdGFydENsaWNrLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QnRuLmFuY2hvci5zZXRUbygwLjUsMC41KTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgfSxcclxuICAgIHN0YXJ0Q2xpY2s6ZnVuY3Rpb24oKXtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgICB9XHJcblxyXG59OyIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbihnYW1lKSB7XHJcbiAgICB0aGlzLmFzc2V0ID0gbnVsbDtcclxuICAgIHRoaXMucmVhZHkgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJlbG9hZGVyO1xyXG5cclxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgICBwcmVsb2FkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmluZGljYXRvciA9IHRoaXMuYWRkLnNwcml0ZSgzMjAsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAncHJlbG9hZGVyJyk7IC8vc3ByaXRlKHgsIHksIGtleSwgZnJhbWUsIGdyb3VwKSBcclxuICAgICAgICB0aGlzLmluZGljYXRvci5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmluZGljYXRvcik7XHJcblxyXG4gICAgICAgIC8vbG9hZCBzdHVmZlxyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmFja2dyb3VuZCcsICdhc3NldHMvYmFja2dyb3VuZC5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2dyb3VuZCcsICdhc3NldHMvZ3JvdW5kLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGl0bGUnLCAnYXNzZXRzL3RpdGxlLnBuZycpO1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnc3RhcnRCdXR0b24nLCAnYXNzZXRzL3N0YXJ0LWJ1dHRvbi5wbmcnKTtcclxuXHJcbiAgICAgICAgLy90aGUgcGFseWVyXHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdwbGF5ZXInLCAnYXNzZXRzL3BsYXllci5wbmcnKTsvL3RoaXMubG9hZC5zcHJpdGVzaGVldChrZXksIHVybCwgZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQsIG51bWJlck9mRnJhbWVzKTsgIFxyXG4gICAgICAgIC8vdGhlIGJpcmRcclxuICAgICAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ2JpcmQnLCAnYXNzZXRzL2JpcmQucG5nJywzNCwyNCwzKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdwaXBlJywnYXNzZXRzL3BpcGVzLnBuZycsNTQsMzIwLDIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHRoaXMuaW5kaWNhdG9yLmNyb3BFbmFibGVkID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCAhISB0aGlzLnJlYWR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMucmVhZHkgPSB0cnVlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuIiwidmFyIFNwbGFzaCA9IGZ1bmN0aW9uICgpIHtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3BsYXNoO1xuXG5TcGxhc2gucHJvdG90eXBlID0ge1xuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgfVxufTsiLCJ2YXIgVXRpbHMgPSB7XHJcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
